{"version":3,"sources":["dist/angular-websocket.js"],"names":["global","factory","define","amd","exports","module","require","mod","angular","ws","angularWebsocket","this","_angular","$WebSocketProvider","$rootScope","$q","$timeout","$websocketBackend","$WebSocket","url","protocols","options","isObject","isArray","undefined","ssl","test","scope","rootScopeFailover","useApplyAsync","initialTimeout","maxTimeout","reconnectIfNotNormalClose","binaryType","_reconnectAttempts","sendQueue","onOpenCallbacks","onMessageCallbacks","onErrorCallbacks","onCloseCallbacks","objectFreeze","_readyStateConstants","_connect","_setInternalState","prototype","CONNECTING","OPEN","CLOSING","CLOSED","RECONNECT_ABORTED","_normalCloseCode","_reconnectableStatusCodes","safeDigest","autoApply","$$phase","$digest","bindToScope","self","$on","force","socket","readyState","create","onmessage","_angular2","default","bind","_onMessageHandler","onopen","_onOpenHandler","onerror","_onErrorHandler","onclose","_onCloseHandler","fireQueue","length","data","shift","send","isString","message","JSON","stringify","deferred","resolve","notifyOpenCallbacks","event","i","call","notifyCloseCallbacks","notifyErrorCallbacks","onOpen","cb","push","onClose","onError","onMessage","callback","isFunction","Error","isDefined","filter","RegExp","fn","pattern","$applyAsync","code","indexOf","reconnect","applyAsyncOrDigest","args","arraySlice","arguments","apply","currentCallback","exec","close","bufferedAmount","cancelableify","promise","cancel","then","reason","splice","reject","defer","isMocked","isConnected","mockSend","backoffDelay","_getBackoffDelay","backoffDelaySeconds","console","log","attempt","R","Math","random","T","N","M","floor","min","pow","state","objectDefineProperty","_internalConnectionState","forEach","pending","get","set","$WebSocketBackendProvider","$log","Socket","createWebSocketBackend","warn","Object","defineProperty","value","obj","__esModule","window","Client","client","e","WebSocket","MozWebSocket","noop","freeze","Array","slice","elt","len","from","Number","ceil","service"],"mappings":"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"}